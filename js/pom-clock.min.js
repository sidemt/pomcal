var intervalId,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var BREAK="Break",SESSION="Session",LONG_BREAK="Long Break",SOUND_SESSION=document.getElementById("sound-session"),SOUND_BREAK=document.getElementById("sound-break"),SOUND_LONG_BREAK=document.getElementById("sound-long-break"),beep=SOUND_SESSION;function playSound(e){e&&beep.play()}function mmss(e,t){return("00"+e).slice(-2)+":"+("00"+t).slice(-2)}function calcTimeLeft(e){return mmss(Math.floor(e%3600/60),Math.floor(e%60))}var PomodoroClock=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={timerLabel:SESSION,timeLeft:1500,breakLength:5,sessionLength:25,currentCount:1,sessionCycle:4,longBreakLength:15,isRunning:!1,soundSetting:!0},n.reset=n.reset.bind(n),n.decrementBreak=n.decrementBreak.bind(n),n.incrementBreak=n.incrementBreak.bind(n),n.decrementSession=n.decrementSession.bind(n),n.incrementSession=n.incrementSession.bind(n),n.decrementCycle=n.decrementCycle.bind(n),n.incrementCycle=n.incrementCycle.bind(n),n.decrementLongBreak=n.decrementLongBreak.bind(n),n.incrementLongBreak=n.incrementLongBreak.bind(n),n.countDown=n.countDown.bind(n),n.toggleTimer=n.toggleTimer.bind(n),n.startStop=n.startStop.bind(n),n.updateTimeLeft=n.updateTimeLeft.bind(n),n.toggleSoundSetting=n.toggleSoundSetting.bind(n),n}return _inherits(t,React.Component),_createClass(t,[{key:"reset",value:function(){this.setState({timerLabel:SESSION,timeLeft:1500,breakLength:5,sessionLength:25,currentCount:1,sessionCycle:4,longBreakLength:15,isRunning:!1}),clearInterval(intervalId),beep.pause(),beep.currentTime=0,beep=SOUND_SESSION,document.getElementById("body").style.backgroundColor="var(--main-red)"}},{key:"decrementBreak",value:function(){this.state.breakLength>1&&(this.setState(function(e){return{breakLength:e.breakLength-1}}),this.updateTimeLeft(BREAK))}},{key:"incrementBreak",value:function(){this.state.breakLength<120&&(this.setState(function(e){return{breakLength:e.breakLength+1}}),this.updateTimeLeft(BREAK))}},{key:"decrementSession",value:function(){this.state.sessionLength>1&&(this.setState(function(e){return{sessionLength:e.sessionLength-1}}),this.updateTimeLeft(SESSION))}},{key:"incrementSession",value:function(){this.state.sessionLength<120&&(this.setState(function(e){return{sessionLength:e.sessionLength+1}}),this.updateTimeLeft(SESSION))}},{key:"decrementCycle",value:function(){this.state.sessionCycle>1&&this.setState(function(e){return{sessionCycle:e.sessionCycle-1}})}},{key:"incrementCycle",value:function(){this.state.sessionCycle<99&&this.setState(function(e){return{sessionCycle:e.sessionCycle+1}})}},{key:"decrementLongBreak",value:function(){this.state.longBreakLength>1&&(this.setState(function(e){return{longBreakLength:e.longBreakLength-1}}),this.updateTimeLeft(LONG_BREAK))}},{key:"incrementLongBreak",value:function(){this.state.longBreakLength<120&&(this.setState(function(e){return{longBreakLength:e.longBreakLength+1}}),this.updateTimeLeft(LONG_BREAK))}},{key:"countDown",value:function(){this.state.timeLeft>1?this.setState(function(e){return{timeLeft:e.timeLeft-1}}):this.toggleTimer()}},{key:"toggleTimer",value:function(){if(this.state.timerLabel==SESSION){var e=document.getElementById("current-event-name").innerText,t=document.getElementById("current-event-desc").innerText,n=document.getElementById("calendar-select").value;createEvent(this.state.sessionLength,e,t,n),this.state.currentCount<this.state.sessionCycle?(this.setState({timerLabel:BREAK,timeLeft:60*this.state.breakLength}),document.getElementById("body").style.backgroundColor="var(--main-green)",beep=SOUND_BREAK,this.setState(function(e){return{currentCount:e.currentCount+1}})):(this.setState({timerLabel:LONG_BREAK,timeLeft:60*this.state.longBreakLength}),document.getElementById("body").style.backgroundColor="var(--main-blue)",beep=SOUND_LONG_BREAK,this.setState(function(e){return{currentCount:1}})),playSound(this.state.soundSetting)}else this.setState({timerLabel:SESSION,timeLeft:60*this.state.sessionLength}),document.getElementById("body").style.backgroundColor="var(--main-red)",beep=SOUND_SESSION,playSound(this.state.soundSetting)}},{key:"startStop",value:function(){this.state.isRunning?(this.setState({isRunning:!1}),clearInterval(intervalId),beep.pause(),beep.currentTime=0):(this.setState({isRunning:!0}),intervalId=setInterval(this.countDown,1e3),playSound(this.state.soundSetting))}},{key:"updateTimeLeft",value:function(e){if(e==SESSION&&this.state.timerLabel==SESSION)this.setState(function(e){return{timeLeft:60*e.sessionLength}});else if(e==BREAK&&this.state.timerLabel==BREAK)this.setState(function(e){return{timeLeft:60*e.breakLength}});else{if(e!=LONG_BREAK||this.state.timerLabel!=LONG_BREAK)return;this.setState(function(e){return{timeLeft:60*e.longBreakLength}})}}},{key:"toggleSoundSetting",value:function(){this.setState(function(e){return{soundSetting:!e.soundSetting}})}},{key:"render",value:function(){return document.title=calcTimeLeft(this.state.timeLeft)+" ["+this.state.timerLabel+"] - Pom-Cal",React.createElement("div",{id:"pomodoro-clock-inside"},React.createElement("div",{className:"btn-set timer"},React.createElement("div",null,React.createElement("div",{id:"timer-label",className:"label"},this.state.timerLabel),React.createElement(TimeLeft,{timeLeft:this.state.timeLeft}),React.createElement("div",null,"Completed Sessions: ",this.state.currentCount-1,"/",this.state.sessionCycle)),React.createElement("div",null,React.createElement("button",{id:"start_stop",className:"btn btn-light",onClick:this.startStop},"Start/Pause"),React.createElement("button",{id:"reset",className:"btn btn-light",onClick:this.reset},"Reset"))),React.createElement("div",{className:"btn-set session-length"},React.createElement("div",{id:"session-label",className:"label"},"Session Length"),React.createElement("div",{id:"session-length",className:"time"},this.state.sessionLength),React.createElement("div",null,React.createElement("button",{id:"session-decrement",className:"btn btn-light fixed-width",onClick:this.decrementSession},"-"),React.createElement("button",{id:"session-increment",className:"btn btn-light fixed-width",onClick:this.incrementSession},"+"))),React.createElement("div",{className:"btn-set break-length"},React.createElement("div",{id:"break-label",className:"label"},"Break Length"),React.createElement("div",{id:"break-length",className:"time"},this.state.breakLength),React.createElement("div",null,React.createElement("button",{id:"break-decrement",className:"btn btn-light fixed-width",onClick:this.decrementBreak},"-"),React.createElement("button",{id:"break-increment",className:"btn btn-light fixed-width",onClick:this.incrementBreak},"+"))),React.createElement("div",{className:"btn-set long-break-length"},React.createElement("div",{id:"long-break-label",className:"label"},"Long Break Length"),React.createElement("div",{id:"long-break-length",className:"time"},this.state.longBreakLength),React.createElement("div",null,React.createElement("button",{id:"long-break-decrement",className:"btn btn-light fixed-width",onClick:this.decrementLongBreak},"-"),React.createElement("button",{id:"long-break-increment",className:"btn btn-light fixed-width",onClick:this.incrementLongBreak},"+"))),React.createElement("div",{className:"btn-set cycle-count"},React.createElement("div",{id:"cycle-label",className:"label"},"Long break after"),React.createElement("div",{id:"cycle-count",className:"time"},this.state.sessionCycle," sessions"),React.createElement("div",null,React.createElement("button",{id:"cycle-decrement",className:"btn btn-light fixed-width",onClick:this.decrementCycle},"-"),React.createElement("button",{id:"cycle-increment",className:"btn btn-light fixed-width",onClick:this.incrementCycle},"+"))),React.createElement(SoundSwitch,{soundSetting:this.state.soundSetting,onClick:this.toggleSoundSetting}))}}]),t}(),TimeLeft=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.timeLeft;return React.createElement("div",{id:"time-left",className:"time"},calcTimeLeft(e))}}]),t}(),SoundSwitch=function(e){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.soundSetting;return React.createElement("div",{id:"sound-setting"},React.createElement("span",{id:"switch-label"},"Sound "),React.createElement("label",{className:"switch"},e?React.createElement("input",{type:"checkbox",checked:!0}):React.createElement("input",{type:"checkbox"}),React.createElement("span",{className:"slider round",onClick:this.props.onClick})))}}]),t}();ReactDOM.render(React.createElement(PomodoroClock,null),document.getElementById("pomodoro-clock"));